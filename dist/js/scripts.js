"use strict";angular.module("stockWatcher.Controllers",[]),angular.module("stockWatcher.Directives",[]),angular.module("stockWatcher.Filters",[]),angular.module("stockWatcher.Providers",[]),angular.module("stockWatcher.Services",[]),angular.module("stockWatcher",["ngRoute","ngAnimate","stockWatcher.Controllers","stockWatcher.Directives","stockWatcher.Services","stockWatcher.Providers","stockWatcher.Filters"]).config(["$routeProvider",function(e){e.when("/",{templateUrl:"views/home-page.html",controller:"HomePageController"}).when("/about",{templateUrl:"views/about-page.html",controller:"AboutPageController"}).when("/quote/:stockSymbol",{templateUrl:"views/quoteDetails-page.html",controller:"QuoteDetailsPageController"}).when("/currency",{templateUrl:"views/currency-page.html",controller:"CurrencyPageController"}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(e){var t=-1!==window.location.href.indexOf("http://localhost:8000/app");e.debugInfoEnabled(!t)}]).config(function(){String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return"undefined"!=typeof e[r]?e[r]:t})})}).run(["$window","$rootScope",function(e,t){var r=!0;navigator&&navigator.onLine&&(r=navigator.onLine),t.$apply(function(){t.applicationIsOnline=r}),e.addEventListener?(e.addEventListener("online",function(){t.$apply(function(){t.applicationIsOnline=!0})},!1),e.addEventListener("offline",function(){t.$apply(function(){t.applicationIsOnline=!1})},!1)):(document.body.ononline=function(){t.$apply(function(){t.applicationIsOnline=!0})},document.body.onoffline=function(){t.$apply(function(){t.applicationIsOnline=!1})})}]).run(["$window","$rootScope",function(){"undefined"!=typeof Highcharts&&Highcharts.setOptions({global:{useUTC:!1}})}]),angular.module("stockWatcher.Controllers").controller("AboutPageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("CurrencyChartController",["$scope","$interval","$timeout","currencyService","errorMessages",function(e,t,r,a,o){e.refreshInterval=60;var s="container"+e.fromCurrency+e.toCurrency;e.containerID=s;var n=void 0,l=void 0;e.fetchPreviousDayClosePrice=function(){var t=[e.symbol],r=stockService.getCurrentDataWithDetails(t);r.then(function(e){e.query.count>0&&(n=e.query.results.row.PreviousClose,"undefined"!=typeof n&&y())},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===o.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};var i=function(t){l=new Highcharts.StockChart({chart:{renderTo:s},title:{text:e.fromCurrency+" to "+e.toCurrency},credits:{enabled:!1},rangeSelector:{buttons:[{type:"day",count:1,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"all",text:"All"}],selected:0,allButtonsEnabled:!0},series:[{name:e.fromCurrency+" to "+e.toCurrency,type:"area",data:t,gapSize:5,tooltip:{valueDecimals:4},fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null}]}),"undefined"!=typeof n&&y()},c=function(){v(),i([null]),l.showLoading()};r(c,0);var d=e.fromCurrency,u=e.toCurrency,h=180,g="10d",v=function(){var e=a.getCurrencyExchangeRateHistory(d,u,h,g);e.then(function(e){e&&e.length>0?(l.hideLoading(),i(e)):(console.warn('"'+d+"-"+u+'" init did not receive data, refreshing it.'),v())},function(e){e&&console&&console.error&&console.error(e)})},m=function(){var e=a.getCurrencyExchangeRateHistory(d,u,h,g);e.then(function(e){e&&e.length>0?p(e):(console.warn('"'+d+"-"+u+'" update did not receive data, refreshing it.'),m())},function(e){e&&console&&console.error&&console.error(e)})},p=function(e){var t=l.series[0];t.setData(e),"undefined"!=typeof n&&y(),l.redraw()},y=function(){var t=e.fromCurrency+e.toCurrency,r=n;if(l){var a=t+"-open",o=l.yAxis[0];o.removePlotLine(a),o.addPlotLine({color:"red",dashStyle:"LongDash",id:a,label:{text:"Prev Close ($"+r+")"},width:1,zIndex:3,value:r})}};e.createRefresher=function(){return t(function(){m()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof e.refresher&&(t.cancel(e.refresher),e.refresher=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.refresher=e.createRefresher(),e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof l&&l.destroy()})}]),angular.module("stockWatcher.Controllers").controller("CurrencyPageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("HomePageController",["$scope",function(){}]),angular.module("stockWatcher.Controllers").controller("MarketChartController",["$scope","$interval","stockService","errorMessages",function(e,t,r,a){e.refreshInterval=60,e.chartIsInitialized=!1;var o="containerMarkets";e.containerID=o;var s=void 0,n=void 0,l=[{symbol:".INX",name:"S&P 500",data:[]},{symbol:".DJI",name:"Dow Jones",data:[]},{symbol:"OSPTX",name:"S&P/TSX",data:[]}],i=[],c={title:"TSX, Dow Jones & S&P500 Indices"},d=function(){n=new Highcharts.StockChart({chart:{renderTo:o},title:{text:c.title},credits:{enabled:!1},rangeSelector:{buttons:[{type:"hour",count:12,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"all",text:"All"}],selected:0,allButtonsEnabled:!0},series:l,plotOptions:{series:{compare:"percent"}},yAxis:{labels:{formatter:function(){return(this.value>0?" + ":"")+this.value+"%"}},plotLines:[{value:0,width:2,color:"silver"}]},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',valueDecimals:2}}),"undefined"!=typeof s&&f(),e.chartIsInitialized=!0},u=60,h="10d",g=0,v=function(e,t){var o=l[e].symbol,s=l.length;i[e]=r.getLiveMarketData(o,u,h),i[e].then(function(e,t){return function(r){r&&r.length>0?(l[e].data=r,"init"===t?(g++,g===s&&d()):"update"===t&&y(e,r)):v(e,t)}}(e,t),function(e,t){return function(r){if(r){var o=!0;"undefined"!=typeof r.error&&r.error===a.NoData.Error&&(o=!1),o&&console.error("Error while fetching data",r)}v(e,t)}}(e,t))},m=function(){for(var e=0,t=l.length;t>e;e++)v(e,"init")};m();var p=function(){if("undefined"!=typeof n)for(var e=0,t=l.length;t>e;e++)v(e,"update")},y=function(e){var t=n.series[e];t.setData(l[e].data),"undefined"!=typeof s&&f()},f=function(){var t=e.fromCurrency+e.toCurrency,r=s;if(n){var a=t+"-open",o=n.yAxis[0];o.removePlotLine(a),o.addPlotLine({color:"red",dashStyle:"LongDash",id:a,label:{text:"Prev Close ($"+r+")"},width:1,zIndex:3,value:r})}};e.createRefresher=function(){return t(function(){p()},1e3*e.refreshInterval)},e.destroyRefresher=function(){angular.isDefined(E)&&(t.cancel(E),E=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()};var E=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof n&&n.destroy()}),e.$parent.$watch("showTitle",function(e){"undefined"!=typeof n&&(n.setTitle(e?{text:c.title}:{text:null}),n.reflow(),n.redraw())}),e.$parent.$watch("showZoom",function(e){"undefined"!=typeof n&&(n.rangeSelector.enabled=e,n.reflow(),n.redraw())}),e.$parent.$watch("showDatePicker",function(){}),e.$parent.$watch("showNavigator",function(e){if("undefined"!=typeof n){var t=n.scroller;e?(t.xAxis.labelGroup.show(),t.xAxis.gridGroup.show(),t.series.show(),t.navigatorGroup.show(),t.scrollbar.show(),t.scrollbarRifles.show(),t.scrollbarGroup.show(),$.each(t.elementsToDestroy,function(e,t){t.hide()})):(t.xAxis.labelGroup.hide(),t.xAxis.gridGroup.hide(),t.series.hide(),t.scrollbar.hide(),t.scrollbarGroup.hide(),t.scrollbarRifles.hide(),t.navigatorGroup.hide(),$.each(t.elementsToDestroy,function(e,t){t.hide()})),n.reflow(),n.redraw()}})}]),angular.module("stockWatcher.Controllers").controller("MarketChartWidgetController",["$scope",function(e){e.showTitle=!0,e.showZoom=!0,e.showDatePicker=!0,e.showNavigator=!0,e.toggleTitle=function(){e.showTitle=!e.showTitle},e.toggleZoom=function(){e.showZoom=!e.showZoom},e.toggleDatePicker=function(){e.showDatePicker=!e.showDatePicker},e.toggleNavigator=function(){e.showNavigator=!e.showNavigator}}]),angular.module("stockWatcher.Controllers").controller("QuoteDetailsPageController",["$scope","$interval","$routeParams","$location","stockService","errorMessages",function(e,t,r,a,o,s){e.$location=a,e.stockSymbol=r.stockSymbol,e.refreshInterval=30;var n=function(){var t=[e.stockSymbol],r=o.getCurrentDataWithDetails(t);r.then(function(t){e.stockData=t.query.results.row},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===s.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};n(),e.createRefresher=function(){return t(function(){n()},1e3*e.refreshInterval)},e.destroyRefresher=function(){angular.isDefined(l)&&(t.cancel(l),l=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()};var l=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("RouteController",["$scope","$route","$location",function(e,t){e.$on("$routeChangeSuccess",function(){e.controller=t.current.controller})}]),angular.module("stockWatcher.Controllers").controller("SparklineBarController",["$scope","$element","$attrs",function(e,t){function r(){var r=parseFloat(e.max,10),c=parseFloat(e.min,10),d=(c+r)/2,u=e.current;if(0!==r&&0!==c&&!isNaN(r)&&!isNaN(c)){var h=d3.svg.axis().scale(n).orient("top").tickSize(2).tickValues([c,d,r]).tickFormat(function(e){return i(e)}),g=d3.select(t[0]).select("svg").remove();g=d3.select(t[0]).append("svg").attr("width",o+a.left+a.right).attr("height",s+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")");var v=[{name:"A",value:u}];n.domain([c,r]),l.domain(v.map(function(e){return e.name})),g.selectAll(".bar").data(v).enter().append("rect").attr("class","bar positive").attr("x",function(){return n(c)}).attr("y",function(e){return l(e.name)}).attr("width",function(){return n(u)}).attr("height",l.rangeBand()),g.append("g").attr("class","x axis").call(h),g.selectAll(".x.axis .tick text").each(function(e,t){0===t?d3.select(this).attr("style","text-anchor: start;"):1===t?d3.select(this).attr("style","text-anchor: middle; display: none;"):2===t&&d3.select(this).attr("style","text-anchor: end;")}),g.append("g").attr("class","y axis").append("line").attr("x1",n(0)).attr("x2",n(0)).attr("y2",s)}}var a={top:15,right:10,bottom:0,left:10},o=120-a.left-a.right,s=27-a.top-a.bottom,n=d3.scale.linear().range([0,o]),l=d3.scale.ordinal().rangeRoundBands([0,s],0),i=d3.format("$.2f");r(),e.$watchCollection("[current,min,max]",function(e,t){(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2])&&r()})}]),angular.module("stockWatcher.Controllers").controller("SparklineController",["$scope","$interval","stockService","errorMessages",function(e,t,r,a){function o(t){var r=$(s).parent().width(),a=24,o=d3.scale.linear().range([0,r-2]),n=d3.scale.linear().range([a-4,0]),l=d3.svg.line().interpolate("basis").x(function(e){return o(e.date)}).y(function(e){return n(e.close)});t.forEach(function(e){e.date=e[0],e.close=e[1]}),o.domain(d3.extent(t,function(e){return e.date})),n.domain(d3.extent(t,function(e){return e.close}));var i=d3.select(s).select("svg").remove(),c=t[t.length-1].close,d="neutral";c>e.yesterdayClosePrice?d="up":c<e.yesterdayClosePrice&&(d="down"),i=d3.select(s).append("svg").attr("width",r).attr("height",a).append("g").attr("transform","translate(0, 2)"),i.append("path").datum(t).attr("class","sparkline").attr("d",l),i.append("circle").attr("class","sparkcircle "+d).attr("cx",o(t[t.length-1].date)).attr("cy",n(t[t.length-1].close)).attr("r",1.5)}e.refreshInterval=60,e.dataLoaded=!1;var s="#sparkline"+e.symbol.replace(".",""),n=function(){var t=e.symbol.replace(".TO",""),s=e.symbol.indexOf("TO")>-1?"TSE":"NYSE",n=60,l="1d",i=r.getLiveData(t,s,n,l);i.then(function(t){o(t),e.dataLoaded=!0},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};$(document).ready(function(){n()}),e.createRefresher=function(){return t(function(){n()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof l&&(t.cancel(l),l=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()};var l=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("StockAnalystsEstimatesController",["$scope","$interval","stockService","errorMessages",function(e,t,r,a){var o=function(){var t=r.getAnalystEstimatesForStock(e.symbol);t.then(function(t){e.data=t},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};o()}]),angular.module("stockWatcher.Controllers").controller("StockChartController",["$scope","$interval","$timeout","$element","$attrs","stockService","errorMessages",function(e,t,r,a,o,s,n){e.refreshInterval=60;var l="container"+e.symbol.replace(".","");e.containerID=l,e.yesterdayClosePrice=void 0,e.chart=void 0,e.initGraphPromise=void 0,e.updateGraphPromise=void 0;var i=!1,c=function(){var t=[e.symbol],r=s.getCurrentDataWithDetails(t);r.then(function(t){if(t.query.count>0){var r=t.query.results.row.PreviousClose;r!==e.yesterdayClosePrice&&(e.yesterdayClosePrice=r,f())}},function(e){if(c(),e){var t=!0;"undefined"!=typeof e.error&&e.error===n.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};c();var d=function(t){e.chart=new Highcharts.StockChart({chart:{renderTo:l},title:{text:e.symbol+" Stock Price"},credits:{enabled:!1},rangeSelector:{buttons:[{type:"hour",count:12,text:"1d"},{type:"day",count:2,text:"2d"},{type:"day",count:7,text:"5d"},{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"}],selected:0,allButtonsEnabled:!0},xAxis:{events:{setExtremes:function(t){if("undefined"!=typeof t.rangeSelectorButton){for(var r=void 0,a=void 0,o=0,s=e.chart.rangeSelector.buttonOptions.length;s>o;o++){var n=e.chart.rangeSelector.buttonOptions[o];if(n.text===t.rangeSelectorButton.text&&n.type===t.rangeSelectorButton.type){r=o,a=n;break}}if(r!==e.chart.rangeSelector.selected&&"rangeSelectorButton"===t.trigger){if(t.preventDefault(),r>2){var l=void 0,c=void 0;switch(a.type){case"month":l=1800,c=a.count+"M";break;case"ytd":l=86400,c="12M"}"undefined"!=typeof c&&(v=l,m=c)}else v=60,m="10d";i=!0,e.chart.showLoading(),e.updateGraph()}}}}},series:[{name:e.symbol,type:"area",data:t,tooltip:{valueDecimals:2},fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},threshold:null}]});e.chart.rangeSelector.buttons;"undefined"!=typeof e.yesterdayClosePrice&&f()},u=function(){p(),d([null]),e.chart.showLoading()};r(u,0);var h=e.symbol.replace(".TO",""),g=e.symbol.indexOf("TO")>-1?"TSE":"NYSE",v=60,m="10d",p=function(){var t=s.getLiveData(h,g,v,m);t.then(function(t){t&&t.length>0?(e.chart.hideLoading(),d(t)):(console.warn('"'+h+'" init did not receive data, refreshing it.'),e.initGraphPromise=r(p,1e3))},function(e){p(),e.error!==n.NoData.Error&&console.error(e)}).then(function(){var t=new Date,r="2014-01-01",a=[t.getFullYear(),(t.getMonth()+1<10?"0":"")+(t.getMonth()+1),(t.getDate()<10?"0":"")+t.getDate()].join("-"),o=s.getDividendHistoryForStock(h,r,a);o.then(function(t){for(var r=[],a=e.chart.xAxis[0].getExtremes(),o=0,s=t.length;s>o;o++){var n=t[o],l={x:n.Date,title:"Dividend:<br />"+parseFloat(n.Dividends,10).toFixed(4)+"$",text:"Dividend Pay Date"};l.x>a.min&&l.x<a.max&&r.push(l)}r.length>0&&e.chart.addSeries({name:"Dividends",type:"flags",data:r,color:Highcharts.getOptions().colors[0],fillColor:Highcharts.getOptions().colors[0],onSeries:"dataseries",width:60,style:{color:"white"},states:{hover:{fillColor:"#395C84"}}})},function(){})})};e.updateGraph=function(){var t=s.getLiveData(h,g,v,m);t.then(function(t){t&&t.length>0?y(t):(console.warn('"'+h+'" update did not receive data, refreshing it.'),e.updateGraphPromise=r(e.updateGraph,1e3))},function(t){e.updateGraph(),t.error!==n.NoData.Error&&console.error(t)})};var y=function(t){var r=e.chart.series[0];r.setData(t,!i),i&&(e.chart.xAxis[0].setExtremes(),i=!1,e.chart.redraw(),e.chart.hideLoading())},f=function(){if("undefined"!=typeof e.chart){var t=e.yesterdayClosePrice,r=e.symbol+"-previousClose",a=e.chart.yAxis[0];a.removePlotLine(r),a.addPlotLine({color:"red",dashStyle:"LongDash",id:r,label:{text:"Prev Close ($"+t+")"},width:1,zIndex:3,value:t})}};e.createRefresher=function(){return t(function(){e.updateGraph()},1e3*e.refreshInterval)},e.createPreviousCloseRefresher=function(){return t(function(){c()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof e.refresher&&(t.cancel(e.refresher),e.refresher=void 0),"undefined"!=typeof e.previousCloseRefresher&&(t.cancel(e.previousCloseRefresher),e.previousCloseRefresher=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.refresher=e.createRefresher(),e.previousCloseRefresher=e.createPreviousCloseRefresher(),e.$on("$destroy",function(){e.destroyRefresher(),"undefined"!=typeof e.initGraphPromise&&(r.cancel(e.initGraphPromise),e.initGraphPromise=void 0),"undefined"!=typeof e.updateGraphPromise&&(r.cancel(e.updateGraphPromise),e.updateGraphPromise=void 0),"undefined"!=typeof e.chart&&e.chart.destroy()})}]),angular.module("stockWatcher.Controllers").controller("StockDividendHistoryController",["$scope","$interval","stockService","errorMessages",function(e,t,r,a){e.dividendHistory=[];var o=new Date,s=[o.getFullYear()-5,(o.getMonth()+1<10?"0":"")+(o.getMonth()+1),(o.getDate()<10?"0":"")+o.getDate()].join("-"),n=[o.getFullYear(),(o.getMonth()+1<10?"0":"")+(o.getMonth()+1),(o.getDate()<10?"0":"")+o.getDate()].join("-"),l=function(){var t=r.getDividendHistoryForStock(e.symbol,s,n);t.then(function(t){e.dividendHistory=t},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};l(),e.createRefresher=function(){return t(function(){l()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof refresher&&(t.cancel(refresher),refresher=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()},e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("StockListController",["$scope","$interval","stockService","errorMessages","storageService","applicationStorageService",function(e,t,r,a,o,s){e.refreshInterval=30,e.sortOrder="index",e.sortReversed=!1;var n=s.getSavedStockSymbols();e.quotesToFetch=n||[{symbol:"PG",yahooSymbol:"PG",liveData:{},index:0},{symbol:"T",yahooSymbol:"T.TO",liveData:{},index:1},{symbol:"BNS",yahooSymbol:"BNS.TO",liveData:{},index:2},{symbol:"TD",yahooSymbol:"TD.TO",liveData:{},index:3},{symbol:"RY",yahooSymbol:"RY.TO",liveData:{},index:4},{symbol:"PWF",yahooSymbol:"PWF.TO",liveData:{},index:5},{symbol:"FTS",yahooSymbol:"FTS.TO",liveData:{},index:6},{symbol:"BEP",yahooSymbol:"BEP-UN.TO",liveData:{},index:7},{symbol:"EMA",yahooSymbol:"EMA.TO",liveData:{},index:8},{symbol:"XIC",yahooSymbol:"XIC.TO",liveData:{},index:9},{symbol:"XSP",yahooSymbol:"XSP.TO",liveData:{},index:10}],e.stockQuotes=[];var l=function(){for(var t=[],o=0,s=e.quotesToFetch.length;s>o;o++)t.push(e.quotesToFetch[o].yahooSymbol);var n=r.getCurrentDataWithDetails(t);n.then(function(t){for(var r=0,a=t.query.count;a>r;r++)e.quotesToFetch[r].liveData=t.query.results.row[r];e.stockQuotes=e.quotesToFetch},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};l(),e.addStockSuggestions=[],e.$watch("addStockName",function(t){if("undefined"!=typeof t){var a=r.getStockSymbol(t);a.then(function(t){e.addStockSuggestions=t},function(e){console.error(e)})}}),$("#addStockModal").on("shown.bs.modal",function(){$("#addStockName").focus()}),e.selectedStock=void 0,e.hasSelectedStock=!1,e.setSelectedStock=function(t){"undefined"!=typeof t?(e.selectedStock=t,e.hasSelectedStock=!0):(e.selectedStock=void 0,e.hasSelectedStock=!1,e.addStockName=void 0,e.addStockSuggestions=[])},e.saveSelectedStock=function(){var t=s.getSavedStockSymbols();if(null!==t){var r=$.grep(t,function(t){return t.yahooSymbol===e.selectedStock.symbol});if(r.length>0)return}e.quotesToFetch.push({symbol:e.selectedStock.symbol,yahooSymbol:e.selectedStock.symbol,liveData:{},index:e.quotesToFetch.length});for(var a=[],o=0,n=e.quotesToFetch.length;n>o;o++){var i=e.quotesToFetch[o];a.push({symbol:i.symbol,yahooSymbol:i.yahooSymbol,liveData:{},index:i.index})}s.setSavedStocks(a),l(),e.closeAddStockModal()},e.closeAddStockModal=function(){e.setSelectedStock(void 0)},e.createRefresher=function(){return t(function(){l()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof i&&(t.cancel(i),i=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()};var i=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Controllers").controller("StockListItemController",["$scope","stockService","errorMessages",function(e,t,r){var a=function(){var a=t.getLiveData(e.quote.symbol,e.quote.exchange,e.quote.interval,e.quote.period);a.then(function(t){e.liveQuotes=t},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===r.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};a(),e.isGain=function(){if("undefined"!=typeof e.quote.liveData.Change){var t=e.quote.liveData.Change>0;return t}return!1},e.isLoss=function(){if("undefined"!=typeof e.quote.liveData.Change){var t=e.quote.liveData.Change<0;return t}return!1}}]),angular.module("stockWatcher.Controllers").controller("StockNewsController",["$scope","$interval","stockService","errorMessages",function(e,t,r,a){e.refreshInterval=60,e.newsItems=[];var o=function(){var t=r.getNewsFeedForStock(e.symbol);t.then(function(t){e.newsItems=t},function(e){if(e){var t=!0;"undefined"!=typeof e.error&&e.error===a.NoData.Error&&(t=!1),t&&console.error("Error while fetching data",e)}})};o(),e.createRefresher=function(){return t(function(){o()},1e3*e.refreshInterval)},e.destroyRefresher=function(){"undefined"!=typeof s&&(t.cancel(s),s=void 0)},e.refreshIntervalChanged=function(){e.destroyRefresher(),e.createRefresher()},e.setRefreshInterval=function(t){e.refreshInterval=t,e.refreshIntervalChanged()};var s=e.createRefresher();e.$on("$destroy",function(){e.destroyRefresher()})}]),angular.module("stockWatcher.Filters").filter("percentage",["$filter",function(e){return function(t,r){function a(e){return!isNaN(e)&&isFinite(e)}var o=parseFloat(t,10);if(a(o)){var s=e("number")(o,r),n=s+"%";return n}return t}}]),angular.module("stockWatcher.Filters").filter("reverse",function(){return function(e){return"undefined"!=typeof e&&e.constructor===Array?e.slice().reverse():e}}),angular.module("stockWatcher.Directives").directive("currencyChart",function(){return{restrict:"E",scope:{fromCurrency:"@",toCurrency:"@"},templateUrl:"views/currencyChart-partial.html",controller:"CurrencyChartController"}}),angular.module("stockWatcher.Directives").directive("marketChart",function(){return{restrict:"E",scope:{fetchTSX:"@",fetchDJ:"@"},templateUrl:"views/marketChart-partial.html",controller:"MarketChartController"}}),angular.module("stockWatcher.Directives").directive("marketChartWidget",function(){return{restrict:"E",scope:{fetchTSX:"@",fetchDJ:"@"},templateUrl:"views/marketChartWidget-partial.html",controller:"MarketChartWidgetController"}}),angular.module("stockWatcher.Directives").directive("navigationBar",function(){return{restrict:"E",templateUrl:"views/navigationBar-partial.html",controller:"RouteController"}}),angular.module("stockWatcher.Directives").directive("sparklineBar",function(){return{restrict:"E",scope:{min:"@",max:"@",current:"@"},templateUrl:"views/sparklineBar-partial.html",controller:"SparklineBarController"}}),angular.module("stockWatcher.Directives").directive("sparkline",function(){return{restrict:"E",scope:{symbol:"@",exchange:"@",yesterdayClosePrice:"@"},templateUrl:"views/sparkline-partial.html",controller:"SparklineController"}}),angular.module("stockWatcher.Directives").directive("stockAnalystsEstimates",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockAnalystsEstimates-partial.html",controller:"StockAnalystsEstimatesController"}}),angular.module("stockWatcher.Directives").directive("stockChart",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockChart-partial.html",controller:"StockChartController"}}),angular.module("stockWatcher.Directives").directive("stockDividendHistory",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockDividendHistory-partial.html",controller:"StockDividendHistoryController"}}),angular.module("stockWatcher.Directives").directive("stockList",function(){return{restrict:"E",templateUrl:"views/stockList-partial.html",controller:"StockListController"}}),angular.module("stockWatcher.Directives").directive("stockListItem",function(){return{restrict:"A",scope:{quote:"="},templateUrl:"views/stockListItem-partial.html",controller:"StockListItemController"}}),angular.module("stockWatcher.Directives").directive("stockNews",function(){return{restrict:"E",scope:{symbol:"@"},templateUrl:"views/stockNews-partial.html",controller:"StockNewsController"}}),angular.module("stockWatcher.Providers").provider("appConfig",function(){var e="AngularStockWatcher_localStorage_",t={JSONPTimeout:1e4,StorageKeys:{StoredQuotes:e+"storedQuotes",StoredStockListField:e+"storedStockListSortingField",StoredStockListOrder:e+"storedStockListSortingDirection"}};return{set:function(e,r){t[e]=r},$get:function(){return t}}}),angular.module("stockWatcher.Providers").provider("errorMessages",function(){var e={NoData:{Error:"NoData",Message:"No data received"},Timeout:{Error:"Timeout",Message:"Request took longer than {0}ms"},YQL:{Error:"YQLError",Message:'Check "data" for details'}};return{set:function(t,r){e[t]=r},$get:function(){return e}}}),angular.module("stockWatcher.Services").factory("applicationStorageService",["$window","appConfig","storageService",function(e,t,r){var a={},o=function(e){return a[e]},s=function(e,t){a[e]=t},n=function(){var e=t.StorageKeys.StoredQuotes,a=o(e);if(a)return a;var s=angular.fromJson(r.getData(e));return s},l=function(e){var a=t.StorageKeys.StoredQuotes;s(a,e);var o=angular.toJson(e);r.setData(a,o)},i=function(){var e=t.StorageKeys.StoredStockListField,a=o(e);if(a)return a;var s=r.getData(e);return s},c=function(e){var a=t.StorageKeys.StoredStockListField;s(a,e),r.setData(a,e)},d=function(){var e=t.StorageKeys.StoredStockListOrder,a=o(e);if(a)return a;var s=r.getData(e);return"true"===s||1===s?!0:!1},u=function(e){var a=t.StorageKeys.StoredStockListOrder,o=JSON.parse(e);s(a,o),r.setData(a,o)};return{getSavedStockSymbols:n,setSavedStocks:l,getStockListSortingField:i,setStockListSortingField:c,getStockListSortingDirection:d,setStockListSortingDirection:u}}]),angular.module("stockWatcher.Services").factory("currencyService",["$q","$http",function(e,t){var r=function(r,a){var o=e.defer(),s='select * from yahoo.finance.xchange where pair in ("'+r+a+'")',n="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",l="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(s)+n;return t.jsonp(l).success(function(e){var t={};e.query.count>0&&(t=e.query.results.rate,t.Ask=parseFloat(t.Ask,10),t.Bid=parseFloat(t.Bid,10),t.Rate=parseFloat(t.Rate,10)),o.resolve(t)}),o.promise},a=function(r,a,o,s){var n=e.defer(),l=0,i="http://www.google.com/finance/getprices?q="+r+a+"&i="+o+"&p="+s+"&f=d,c,v,k,o,h,l&df=cpct&auto=0&ei=Ef6XUYDfCqSTiAKEMg",c='SELECT * FROM csv WHERE url="'+i+'"',d="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(c)+"&format=json&callback=JSON_CALLBACK";return t.jsonp(d).success(function(e){var t=[],r=new Date,a=null!==e.query.results&&e.query.results.row.length>=7;if(e.query&&e.query.count>0&&a){var s=0;e.query.results.row[6]&&(s=parseInt(e.query.results.row[6].col0.replace("TIMEZONE_OFFSET=",""),10));for(var i=parseInt(e.query.results.row[7].col0.replace("a",""),10)+60*s,c=0,d=7;d<e.query.count;d++){"a"===e.query.results.row[d].col0[0]?(i=parseInt(e.query.results.row[d].col0.replace("a",""),10)+60*s,c=0):c=parseInt(e.query.results.row[d].col0,10);var u=new Date(1e3*(i+c*o+60*r.getTimezoneOffset()));if(u>l){var h=parseFloat(e.query.results.row[d].col1,10),g=[u,h];l=u,t.push(g)}}}n.resolve(t)}),n.promise};return{getCurrencyExchangeRate:r,getCurrencyExchangeRateHistory:a}}]),angular.module("stockWatcher.Services").factory("stockService",["$q","$http","$timeout","appConfig","errorMessages",function(e,t,r,a,o){var s=[["a0","Ask"],["a2","AverageDailyVolume"],["a5","AskSize"],["b0","Bid"],["b2","AskRealTime"],["b3","BidRealTime"],["b4","BookValue"],["b6","BidSize"],["c0","ChangeAndPercentChange"],["c1","Change"],["c3","Commission"],["c4","Currency"],["c6","ChangeRealTime"],["c8","AfterHoursChangeRealTime"],["d0","DividendPerShare"],["d1","LastTradeDate"],["d2","TradeDate"],["e0","EarningsPerShare"],["e1","ErrorIndication"],["e7","EPSEstimateCurrentYear"],["e8","EPSEstimateNextYear"],["e9","EPSEstimateNextQuarter"],["h0","DaysHigh"],["j0","_52WeekLow"],["k0","_52WeekHigh"],["g0","DaysLow"],["g1","HoldingsGainPercent"],["g3","AnnualizedGain"],["g4","HoldingsGain"],["g5","HoldingsGainPercentRealTime"],["g6","HoldingsGainRealTime"],["i0","MoreInfo"],["i5","OrderBookRealTime"],["j0","YearLow"],["j1","MarketCapitalization"],["j3","MarketCapRealTime"],["j4","EBITDA"],["j5","ChangeFrom52WeekLow"],["j6","PercentChangeFrom52WeekLow"],["k0","YearHigh"],["k1","LastTradeRealTimeWithTime"],["k2","ChangePercentRealTime"],["k4","ChangeFrom52WeekHigh"],["k5","PercentChangeFrom52WeekHigh"],["l0","LastTradeWithTime"],["l1","LastTradePriceOnly"],["l2","HighLimit"],["l3","LowLimit"],["m0","DaysRange"],["m2","DaysRangeRealTime"],["m3","_50DayMovingAverage"],["m4","_200DayMovingAverage"],["m5","ChangeFrom200DayMovingAverage"],["m6","PercentChangeFrom200DayMovingAverage"],["m7","ChangeFrom50DayMovingAverage"],["m8","PercentChangeFrom50DayMovingAverage"],["n0","Name"],["n4","Notes"],["o0","Open"],["p0","PreviousClose"],["p1","PricePaid"],["p2","ChangeInPercent"],["p5","PricePerSales"],["p6","PricePerBook"],["q0","ExDividendDate"],["r0","PERatio"],["r1","DividendPayDate"],["r2","PERatioRealTime"],["r5","PEGRatio"],["r6","PricePerEPSEstimateCurrentYear"],["r7","PricePerEPSEstimateNextYear"],["s0","Symbol"],["s1","SharesOwned"],["s6","Revenue"],["s7","ShortRatio"],["t1","LastTradeTime"],["t7","TickerTrend"],["t8","_1YearTargetPrice"],["v0","Volume"],["v1","HoldingsValue"],["v7","HoldingsValueRealTime"],["w0","_52WeekRange"],["w1","DaysValueChange"],["w4","DaysValueChangeRealTime"],["x0","StockExchange"],["y0","DividendYield"]],n=function(s,n,l){var i=e.defer(),c=e.defer(),d=!1,u=void 0,h='select * from yahoo.finance.historicaldata where symbol = "'+s+'" and startDate = "'+n+'" and endDate = "'+l+'"',g="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",v="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(h)+g;return t.jsonp(v,{timeout:c.promise}).success(function(e){var t=[];e.query.count>0&&(t=e.query.results.quote),0===e.query.count&&i.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(u),c.reject(),i.resolve(t)}).error(function(e){i.reject(d?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)
}),u=r(function(){d=!0,c.resolve()},a.JSONPTimeout),i.promise},l=function(s){for(var n=e.defer(),l=e.defer(),i=!1,c=void 0,d=[],u=0,h=s.length;h>u;u++)d.push('"'+s[u]+'"');var g="select * from yahoo.finance.quote where symbol in ("+d.join(",")+")",v="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",m="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(g)+v;return t.jsonp(m,{timeout:l.promise}).success(function(e){var t=[];e.query.count>0&&(t=e.query.results.quote),0===e.query.count&&n.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(c),l.reject(),n.resolve(t)}).error(function(e){n.reject(i?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),c=r(function(){i=!0,l.resolve()},a.JSONPTimeout),n.promise},i=function(n){for(var l=e.defer(),i=e.defer(),c=!1,d=void 0,u=n.join(","),h=[],g=[],v=0,m=s.length;m>v;v++){var p=s[v];h.push(p[0]),g.push(p[1])}h=h.join(""),g=g.join(",");var y="http://download.finance.yahoo.com/d/quotes.csv?s="+u+"&f="+h+"&e=.csv",f="select * from csv where url='"+y+"' and columns='"+g+"'",E="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",S="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(f)+E;return t.jsonp(S,{timeout:i.promise}).success(function(e){if(0===e.query.count)l.reject({error:o.NoData.Error,message:o.NoData.Message});else if(1===e.query.count)e.query.results.row.Change=parseFloat(e.query.results.row.Change,10),e.query.results.row.ChangeInPercent=parseFloat(e.query.results.row.ChangeInPercent,10),e.query.results.row.LastTradePriceOnly=parseFloat(e.query.results.row.LastTradePriceOnly,10);else for(var t=0,a=e.query.count;a>t;t++)e.query.results.row[t].Change=parseFloat(e.query.results.row[t].Change,10),e.query.results.row[t].ChangeInPercent=parseFloat(e.query.results.row[t].ChangeInPercent,10),e.query.results.row[t].LastTradePriceOnly=parseFloat(e.query.results.row[t].LastTradePriceOnly,10);r.cancel(d),i.reject(),l.resolve(e)}).error(function(e){l.reject(c?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),d=r(function(){c=!0,i.resolve()},a.JSONPTimeout),l.promise},c=function(s,n,l,i){var c=e.defer(),d=e.defer(),u=!1,h=void 0,g=0,v="http://www.google.com/finance/getprices?q="+s+(null===n?"":"&x="+n)+"&i="+l+"&p="+i+"&f=d,c,v,k,o,h,l&df=cpct&auto=0&ei=Ef6XUYDfCqSTiAKEMg",m='SELECT * FROM csv WHERE url="'+v+'"',p="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(m)+"&format=json&callback=JSON_CALLBACK";return t.jsonp(p,{timeout:d.promise}).success(function(e){var t=[],a=new Date,s=null!==e.query.results&&e.query.results.row.length>=7;if(e.query&&e.query.count>0&&s){var n=0;e.query.results.row[6]&&(n=parseInt(e.query.results.row[6].col0.replace("TIMEZONE_OFFSET=",""),10));for(var i=parseInt(e.query.results.row[7].col0.replace("a",""),10)+60*n,u=0,v=7;v<e.query.count;v++){"a"===e.query.results.row[v].col0[0]?(i=parseInt(e.query.results.row[v].col0.replace("a",""),10)+60*n,u=0):u=parseInt(e.query.results.row[v].col0,10);var m=new Date(1e3*(i+u*l+60*a.getTimezoneOffset()));if(m>g){var p=parseFloat(e.query.results.row[v].col1,10),y=[m,p];g=m,t.push(y)}}}0===t.length&&c.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(h),d.reject(),c.resolve(t)}).error(function(e){c.reject(u?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),h=r(function(){u=!0,d.resolve()},a.JSONPTimeout),c.promise},d=function(e,t,r){return c(e,null,t,r)},u=function(s){var n=e.defer(),l=e.defer(),i=!1,c=void 0,d="http://feeds.finance.yahoo.com/rss/2.0/headline?s="+s+"&region=CA",u="select * from feed where url='"+d+"'",h="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",g="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(u)+h;return t.jsonp(g,{timeout:l.promise}).success(function(e){if("undefined"!=typeof e.error)return void n.reject({error:o.YQL.Error,message:o.YQL.Message,data:e.error});var t=e.query.count;0===t&&n.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(c),l.reject(),n.resolve(e.query.results.item)}).error(function(e){n.reject(i?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),c=r(function(){i=!0,l.resolve()},a.JSONPTimeout),n.promise},h=function(s,n,l){var i=e.defer(),c=e.defer(),d=!1,u=void 0,h='select * from yahoo.finance.dividendhistory where symbol = "'+s+'" and startDate = "'+n+'" and endDate = "'+l+'"',g="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",v="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(h)+g;return t.jsonp(v,{timeout:c.promise}).success(function(e){if("undefined"!=typeof e.error)return void i.reject({error:o.YQL.Error,message:o.YQL.Message,data:e.error});var t=e.query.count;0===t&&i.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(u),c.reject(),angular.isArray(e.query.results.quote)||(e.query.results.quote=[e.query.results.quote]);for(var a=0,s=e.query.results.quote.length;s>a;a++){var n=new Date;if("undefined"!=typeof e.query.results.quote[a]){var l=e.query.results.quote[a].Date.split("-");n.setYear(l[0]),n.setMonth(l[1]-1),n.setDate(l[2]),n.setHours(12),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),e.query.results.quote[a].Date=n}}i.resolve(e.query.results.quote)}).error(function(e){i.reject(d?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),u=r(function(){d=!0,c.resolve()},a.JSONPTimeout),i.promise},g=function(s){var n=e.defer(),l=e.defer(),i=!1,c=void 0,d='SELECT * FROM yahoo.finance.analystestimate WHERE symbol="'+s+'"',u="&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=JSON_CALLBACK",h="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(d)+u;return t.jsonp(h,{timeout:l.promise}).success(function(e){if("undefined"!=typeof e.error)return void n.reject({error:o.YQL.Error,message:o.YQL.Message,data:e.error});var t=e.query.count;0===t&&n.reject({error:o.NoData.Error,message:o.NoData.Message}),r.cancel(c),l.reject();var a=e.query.results.results;a.RevenueEst.SalesGrowth.CurrentQtr=parseFloat(a.RevenueEst.SalesGrowth.CurrentQtr,10),a.RevenueEst.SalesGrowth.NextQtr=parseFloat(a.RevenueEst.SalesGrowth.NextQtr,10),a.RevenueEst.SalesGrowth.CurrentYear=parseFloat(a.RevenueEst.SalesGrowth.CurrentYear,10),a.RevenueEst.SalesGrowth.NextYear=parseFloat(a.RevenueEst.SalesGrowth.NextYear,10),a.EarningsHistory.EPSEst=v(a.EarningsHistory.EPSEst),a.EarningsHistory.EPSActual=v(a.EarningsHistory.EPSActual),a.EarningsHistory.Difference=v(a.EarningsHistory.Difference),a.EarningsHistory.Surprise=v(a.EarningsHistory.Surprise),a.EPSTrends.CurrentEstimate=v(a.EPSTrends.CurrentEstimate),a.EPSTrends._7DaysAgo=v(a.EPSTrends._7DaysAgo),a.EPSTrends._30DaysAgo=v(a.EPSTrends._30DaysAgo),a.EPSTrends._60DaysAgo=v(a.EPSTrends._60DaysAgo),a.EPSTrends._90DaysAgo=v(a.EPSTrends._90DaysAgo),a.EPSRevisions.UpLast7Days=v(a.EPSRevisions.UpLast7Days),a.EPSRevisions.UpLast30Days=v(a.EPSRevisions.UpLast30Days),a.EPSRevisions.DownLast30Days=v(a.EPSRevisions.DownLast30Days),a.EPSRevisions.DownLast90Days=v(a.EPSRevisions.DownLast90Days),a.GrowthEst.CurrentQtr=v(a.GrowthEst.CurrentQtr),a.GrowthEst.NextQtr=v(a.GrowthEst.NextQtr),a.GrowthEst.ThisYear=v(a.GrowthEst.ThisYear),a.GrowthEst.NextYear=v(a.GrowthEst.NextYear),a.GrowthEst.Past5Years=v(a.GrowthEst.Past5Years),a.GrowthEst.Next5Years=v(a.GrowthEst.Next5Years),a.GrowthEst.PriceEarnings=v(a.GrowthEst.PriceEarnings),a.GrowthEst.PEGRatio=v(a.GrowthEst.PEGRatio),n.resolve(a)}).error(function(e){n.reject(i?{error:o.Timeout.Error,message:o.Timeout.Message.format(a.JSONPTimeout),data:e}:e)}),c=r(function(){i=!0,l.resolve()},a.JSONPTimeout),n.promise},v=function(e){var t=[];for(var r in e)t.push({period:r,value:parseFloat(e[r],10)});return t},m=function(t){var o=e.defer(),s=e.defer(),n=!1,l=void 0,i=window.YAHOO={Finance:{SymbolSuggest:{}}};i.Finance.SymbolSuggest.ssCallback=function(e){r.cancel(l),s.reject(),o.resolve(e.ResultSet.Result)};var c="http://autoc.finance.yahoo.com/autoc?query="+t+"&callback=YAHOO.Finance.SymbolSuggest.ssCallback";return $.getScript(c),l=r(function(){n=!0,s.resolve()},a.JSONPTimeout),o.promise};return{getHistoricalData:n,getLiveData:c,getLiveMarketData:d,getCurrentData:l,getCurrentDataWithDetails:i,getStockSymbol:m,getNewsFeedForStock:u,getDividendHistoryForStock:h,getAnalystEstimatesForStock:g}}]),angular.module("stockWatcher.Services").factory("storageService",["$window",function(e){var t=function(t,r){var a=e.localStorage;a&&a.setItem(t,r)},r=function(t){var r=e.localStorage;return r?r.getItem(t):void 0},a=function(t){var r=e.localStorage;r&&r.removeItem(t)},o=function(){var t=e.localStorage;t&&t.clear()};return{setData:t,getData:r,deleteData:a,deleteAllData:o}}]),angular.module("stockWatcher").run(["$templateCache",function(e){e.put("views/about-page.html","<h1>About</h1><div>About Page for <em>Stock Watcher</em></div>"),e.put("views/currency-page.html",'<h1>Currencies</h1><div>Currency Page for <em>Stock Watcher</em></div><div class="page-header"><h2>Canadian Dollar (CAD)</h2></div><div class="row"><div class="col-sm-6"><currency-chart from-currency="CAD" to-currency="USD"></currency-chart></div><div class="col-sm-6"><currency-chart from-currency="CAD" to-currency="EUR"></currency-chart></div></div><div class="page-header"><h2>US Dollar (USD)</h2></div><div class="row"><div class="col-sm-6"><currency-chart from-currency="USD" to-currency="CAD"></currency-chart></div><div class="col-sm-6"><currency-chart from-currency="USD" to-currency="EUR"></currency-chart></div></div>'),e.put("views/currencyChart-partial.html",'<div id="{{ containerID }}"></div>'),e.put("views/home-page.html",'<h1>Home</h1><div>Home Page for <em>Stock Watcher</em></div><div><stock-list></stock-list></div><div class="page-header"><h2>Intraday Charts</h2></div><div class="row"><div class="col-sm-6"><stock-chart symbol="PG"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="T.TO"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="BNS.TO"></stock-chart></div><div class="col-sm-6"><stock-chart symbol="TD.TO"></stock-chart></div></div><div class="row"><div class="col-sm-6"><market-chart-widget></market-chart-widget></div><div class="col-sm-6"><div class="page-header"><h2>Currencies</h2></div><currency-chart from-currency="CAD" to-currency="USD"></currency-chart></div></div>'),e.put("views/marketChart-partial.html",'<div ng-hide="chartIsInitialized"><div class="alert alert-info" role="alert"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate text-center"></span> <strong>Loading data...</strong> Chart will display soon.</div></div><div id="{{ containerID }}"></div>'),e.put("views/marketChartWidget-partial.html",'<div class="row"><div class="col-sm-12"><div class="page-header" style="margin-top: 20px;"><div class="row"><div class="col-sm-8"><h2>Market Indices</h2></div><div class="col-sm-4" style="margin-top: 20px;"><div class="dropdown text-right"><button class="btn btn-primary dropdown-toggle btn-sm" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Config <span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1"><li role="presentation" class="small"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleTitle()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showTitle, \'glyphicon-none\': !showTitle}" aria-hidden="true"></span> Show Title</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleZoom()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showZoom, \'glyphicon-none\': !showZoom}" aria-hidden="true"></span> Show Zoom</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleDatePicker()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showDatePicker, \'glyphicon-none\': !showDatePicker}" aria-hidden="true"></span> Show Date Picker</a></li><li role="presentation" class="small"><a role="menuitem" tabindex="-1" href="javascript:;" ng-click="toggleNavigator()"><span class="glyphicon" ng-class="{\'glyphicon-ok\': showNavigator, \'glyphicon-none\': !showNavigator}" aria-hidden="true"></span> Show Navigator</a></li><li class="divider"></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="#">Export Config</a></li><li role="presentation" class="small disabled"><a role="menuitem" tabindex="-1" href="#">Import Config</a></li></ul></div></div></div></div><market-chart fetch-tsx="true" fetch-dj="true"></market-chart></div></div>'),e.put("views/navigationBar-partial.html",'<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#/">Stock Watcher</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li ng-class="{active: controller == \'HomePageController\'}"><a href="#/">Home</a></li><li ng-class="{active: controller == \'CurrencyPageController\'}"><a href="#/currency">Currencies</a></li><li ng-class="{active: controller == \'AboutPageController\'}"><a href="#/about">About</a></li></ul></div></div></nav>'),e.put("views/quoteDetails-page.html",'<h1>Quote Details</h1><div>Quote Details Page for <em>Stock Watcher</em></div><div class="page-header"><h2>{{ stockData.Name }} ({{ stockData.Symbol }})</h2></div><div class="row"><div class="col-sm-4"><h3>General Info</h3><table class="table table-striped table-condensed"><tbody><tr><td><strong>Previous Close:</strong></td><td class="text-right">{{ stockData.PreviousClose | currency }}</td></tr><tr><td><strong>Open:</strong></td><td class="text-right">{{ stockData.Open | currency }}</td></tr><tr><td><strong>Currency:</strong></td><td class="text-right">{{ stockData.Currency }}</td></tr><tr><td><strong>Bid (Real-time):</strong></td><td class="text-right">{{ stockData.BidRealTime | currency }}</td></tr><tr><td><strong>Ask (Real-time):</strong></td><td class="text-right">{{ stockData.AskRealTime | currency }}</td></tr><tr><td><strong>1-Year Target Estimate:</strong></td><td class="text-right">{{ stockData._1YearTargetPrice | currency }}</td></tr><tr><td><strong>Day\'s Range:</strong></td><td class="text-right">{{ stockData.DaysLow | currency }} - {{ stockData.DaysHigh | currency }}</td></tr><tr><td><strong>52-Week Range:</strong></td><td class="text-right">{{ stockData._52WeekLow | currency }} - {{ stockData._52WeekHigh | currency }}</td></tr><tr><td><strong>Volume:</strong></td><td class="text-right">{{ stockData.Volume | number }}</td></tr><tr><td><strong>Average Daily Volume:</strong></td><td class="text-right">{{ stockData.AverageDailyVolume | number }}</td></tr><tr><td><strong>Market Capitalization:</strong></td><td class="text-right">{{ stockData.MarketCapitalization }}</td></tr><tr><td><strong>P/E (ttm) (Real-time):</strong></td><td class="text-right">{{ stockData.PERatioRealTime }}</td></tr><tr><td><strong>EPS (ttm):</strong></td><td class="text-right">{{ stockData.EarningsPerShare }}</td></tr><tr><td><strong>Last Trade Date:</strong></td><td class="text-right">{{ stockData.LastTradeDate }}</td></tr><tr><td><strong>Ex-Dividend Date:</strong></td><td class="text-right">{{ stockData.ExDividendDate }}</td></tr><tr><td><strong>Dividend Pay Date:</strong></td><td class="text-right">{{ stockData.DividendPayDate }}</td></tr><tr><td><strong>Dividend Yield:</strong></td><td class="text-right">{{ stockData.DividendYield }}</td></tr></tbody></table><div class="col-sm-12"><stock-dividend-history symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-dividend-history></div></div><div class="col-sm-8"><stock-chart symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-chart><stock-analysts-estimates symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-analysts-estimates><stock-news symbol="{{ $location.path().replace(\'/quote/\', \'\') }}"></stock-news></div></div>'),e.put("views/sparkline-partial.html","<div></div>"),e.put("views/sparklineBar-partial.html",""),e.put("views/stockAnalystsEstimates-partial.html",'<h3>Analysts Estimates</h3><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">Earnings Est</th><th class="col-md-2 active text-right">Current Qtr.</th><th class="col-md-2 active text-right">Next Qtr.</th><th class="col-md-2 active text-right">Current Year</th><th class="col-md-2 active text-right">Next Year</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">Avg. Estimate</th><td class="col-md-2 text-right">{{ ::data.EarningsEst.AvgEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.AvgEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.AvgEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.AvgEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">No. of Analysts</th><td class="col-md-2 text-right">{{ ::data.EarningsEst.NoofAnalysts.CurrentQtr | number:0 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.NoofAnalysts.NextQtr | number:0 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.NoofAnalysts.CurrentYear | number:0 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.NoofAnalysts.NextYear | number:0 }}</td></tr><tr><th class="col-md-4 active" scope="row">Low Estimate</th><td class="col-md-2 text-right">{{ ::data.EarningsEst.LowEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.LowEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.LowEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.LowEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">High Estimate</th><td class="col-md-2 text-right">{{ ::data.EarningsEst.HighEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.HighEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.HighEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.HighEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">Year Ago EPS</th><td class="col-md-2 text-right">{{ ::data.EarningsEst.YearAgoEPS.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.YearAgoEPS.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.YearAgoEPS.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.EarningsEst.YearAgoEPS.NextYear }}</td></tr></tbody></table><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">Revenue Est</th><th class="col-md-2 active text-right">Current Qtr.</th><th class="col-md-2 active text-right">Next Qtr.</th><th class="col-md-2 active text-right">Current Year</th><th class="col-md-2 active text-right">Next Year</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">Avg. Estimate</th><td class="col-md-2 text-right">{{ ::data.RevenueEst.AvgEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.AvgEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.AvgEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.AvgEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">No. of Analysts</th><td class="col-md-2 text-right">{{ ::data.RevenueEst.NoofAnalysts.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.NoofAnalysts.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.NoofAnalysts.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.NoofAnalysts.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">Low Estimate</th><td class="col-md-2 text-right">{{ ::data.RevenueEst.LowEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.LowEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.LowEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.LowEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">High Estimate</th><td class="col-md-2 text-right">{{ ::data.RevenueEst.HighEstimate.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.HighEstimate.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.HighEstimate.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.HighEstimate.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">Year Ago Sales</th><td class="col-md-2 text-right">{{ ::data.RevenueEst.YearAgoSales.CurrentQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.YearAgoSales.NextQtr }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.YearAgoSales.CurrentYear }}</td><td class="col-md-2 text-right">{{ ::data.RevenueEst.YearAgoSales.NextYear }}</td></tr><tr><th class="col-md-4 active" scope="row">Sales Growth (year/est)</th><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.RevenueEst.SalesGrowth.CurrentQtr < 0 }">{{ ::data.RevenueEst.SalesGrowth.CurrentQtr | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.RevenueEst.SalesGrowth.NextQtr < 0 }">{{ ::data.RevenueEst.SalesGrowth.NextQtr | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.RevenueEst.SalesGrowth.CurrentYear < 0 }">{{ ::data.RevenueEst.SalesGrowth.CurrentYear | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.RevenueEst.SalesGrowth.NextYear < 0 }">{{ ::data.RevenueEst.SalesGrowth.NextYear | percentage:2 }}</td></tr></tbody></table><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">Earnings History</th><th class="col-md-2 active text-right">{{ ::data.EarningsHistory.EPSEst[0].period }}</th><th class="col-md-2 active text-right">{{ ::data.EarningsHistory.EPSEst[1].period }}</th><th class="col-md-2 active text-right">{{ ::data.EarningsHistory.EPSEst[2].period }}</th><th class="col-md-2 active text-right">{{ ::data.EarningsHistory.EPSEst[3].period }}</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">EPS Est</th><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSEst[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSEst[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSEst[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSEst[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">EPS Actual</th><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSActual[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSActual[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSActual[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EarningsHistory.EPSActual[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Difference</th><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Difference[0].value < 0 }">{{ ::data.EarningsHistory.Difference[0].value | number:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Difference[1].value < 0 }">{{ ::data.EarningsHistory.Difference[1].value | number:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Difference[2].value < 0 }">{{ ::data.EarningsHistory.Difference[2].value | number:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Difference[3].value < 0 }">{{ ::data.EarningsHistory.Difference[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Surprise %</th><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Surprise[0].value < 0 }">{{ ::data.EarningsHistory.Surprise[0].value | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Surprise[1].value < 0 }">{{ ::data.EarningsHistory.Surprise[1].value | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Surprise[2].value < 0 }">{{ ::data.EarningsHistory.Surprise[2].value | percentage:2 }}</td><td class="col-md-2 text-right" ng-class="{ \'text-danger\': data.EarningsHistory.Surprise[3].value < 0 }">{{ ::data.EarningsHistory.Surprise[3].value | percentage:2 }}</td></tr></tbody></table><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">EPS Trends</th><th class="col-md-2 active text-right">Current Qtr.</th><th class="col-md-2 active text-right">Next Qtr.</th><th class="col-md-2 active text-right">Current Year</th><th class="col-md-2 active text-right">Next Year</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">Current Estimate</th><td class="col-md-2 text-right">{{ ::data.EPSTrends.CurrentEstimate[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends.CurrentEstimate[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends.CurrentEstimate[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends.CurrentEstimate[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">7 Days Ago</th><td class="col-md-2 text-right">{{ ::data.EPSTrends._7DaysAgo[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._7DaysAgo[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._7DaysAgo[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._7DaysAgo[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">30 Days Ago</th><td class="col-md-2 text-right">{{ ::data.EPSTrends._30DaysAgo[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._30DaysAgo[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._30DaysAgo[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._30DaysAgo[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">60 Days Ago</th><td class="col-md-2 text-right">{{ ::data.EPSTrends._60DaysAgo[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._60DaysAgo[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._60DaysAgo[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._60DaysAgo[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">90 Days Ago</th><td class="col-md-2 text-right">{{ ::data.EPSTrends._90DaysAgo[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._90DaysAgo[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._90DaysAgo[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSTrends._90DaysAgo[3].value | number:2 }}</td></tr></tbody></table><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">EPS Revisions</th><th class="col-md-2 active text-right">Current Qtr.</th><th class="col-md-2 active text-right">Next Qtr.</th><th class="col-md-2 active text-right">Current Year</th><th class="col-md-2 active text-right">Next Year</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">Up Last 7 Days</th><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast7Days[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast7Days[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast7Days[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast7Days[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Up Last 30 Days</th><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast30Days[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast30Days[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast30Days[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.UpLast30Days[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Down Last 30 Days</th><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast30Days[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast30Days[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast30Days[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast30Days[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Down Last 90 Days</th><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast90Days[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast90Days[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast90Days[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.EPSRevisions.DownLast90Days[3].value | number:2 }}</td></tr></tbody></table><table class="table table-bordered table-condensed"><thead><tr><th class="col-md-4 active">Growth Est</th><th class="col-md-2 active text-right">[]</th><th class="col-md-2 active text-right">Industry</th><th class="col-md-2 active text-right">Sector</th><th class="col-md-2 active text-right">S&P 500</th></tr></thead><tbody><tr><th class="col-md-4 active" scope="row">Current Qtr.</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.CurrentQtr[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.CurrentQtr[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.CurrentQtr[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.CurrentQtr[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Next Qtr.</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextQtr[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextQtr[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextQtr[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextQtr[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">This Year</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.ThisYear[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.ThisYear[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.ThisYear[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.ThisYear[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Next Year</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextYear[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextYear[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextYear[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.NextYear[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Past 5 Years (per annum)</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.Past5Years[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Past5Years[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Past5Years[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Past5Years[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Next 5 Years (per annum)</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.Next5Years[0].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Next5Years[1].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Next5Years[2].value | percentage:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.Next5Years[3].value | percentage:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">Price/Earnings (avg. for comparison categories)</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.PriceEarnings[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PriceEarnings[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PriceEarnings[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PriceEarnings[3].value | number:2 }}</td></tr><tr><th class="col-md-4 active" scope="row">PEG Ratio (avg. for comparison categories)</th><td class="col-md-2 text-right">{{ ::data.GrowthEst.PEGRatio[0].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PEGRatio[1].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PEGRatio[2].value | number:2 }}</td><td class="col-md-2 text-right">{{ ::data.GrowthEst.PEGRatio[3].value | number:2 }}</td></tr></tbody></table>'),e.put("views/stockChart-partial.html",'<div id="{{ containerID }}"></div>'),e.put("views/stockDividendHistory-partial.html",'<h3>Dividend History</h3><div class="row"><div class="table-responsive"><table class="table table-striped"><thead><tr><th>Ex-Dividend Date</th><th class="text-right">Amount</th></tr><tr></tr></thead><tbody><tr class="animate-repeat" ng-repeat="dividendData in dividendHistory track by dividendData.Date"><td class="col-md-6">{{ dividendData.Date | date }}</td><td class="col-md-6 text-right">{{ dividendData.Dividends | currency:\'$\':6 }}</td></tr></tbody></table></div></div>'),e.put("views/stockList-partial.html",'<div class="page-header"><div class="row"><div class="col-sm-8"><h2>Watchlist</h2></div><div class="col-sm-4"><div class="btn-group pull-right" style="margin-top: 20px;"><button type="button" class="btn btn-primary dropdown-toggle btn-sm" data-toggle="dropdown" aria-expanded="false">Refresh interval <span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu"><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(30)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 30, \'glyphicon-none\': refreshInterval !== 30}" aria-hidden="true"></span> 30 sec</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(60)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 60, \'glyphicon-none\': refreshInterval !== 60}" aria-hidden="true"></span> 60 sec</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(300)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 300, \'glyphicon-none\': refreshInterval !== 300}" aria-hidden="true"></span> 5 min</a></li><li role="presentation" class="small"><a href="javascript:;" ng-click="setRefreshInterval(900)"><span class="glyphicon" ng-class="{\'glyphicon-ok\': refreshInterval === 900, \'glyphicon-none\': refreshInterval !== 900}" aria-hidden="true"></span> 15 min</a></li></ul></div><button type="button" class="btn btn-primary btn-sm pull-right" data-toggle="modal" data-target="#addStockModal" style="margin-top: 20px; margin-right: 10px;">Add Stock</button></div></div></div><div class="row"><div class="table-responsive"><table class="table table-striped table-hover table-condensed"><thead><tr><th ng-click="sortOrder = \'index\'; sortReversed = !sortReversed;"># <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'index\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'index\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Symbol\'; sortReversed = !sortReversed;">Symbol <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Symbol\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Symbol\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Name\'; sortReversed = !sortReversed;">Name <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Name\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Name\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.LastTradePriceOnly\'; sortReversed = !sortReversed;">Trade Price <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.LastTradePriceOnly\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.LastTradePriceOnly\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.Change\'; sortReversed = !sortReversed;">Chg <small>$</small> <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.Change\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.Change\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.ChangeInPercent\'; sortReversed = !sortReversed;">Chg <small>%</small> <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.ChangeInPercent\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.ChangeInPercent\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.DividendYield\'; sortReversed = !sortReversed;">Yield <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.DividendYield\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.DividendYield\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.PERatio\'; sortReversed = !sortReversed;">P/E <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.PERatio\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.PERatio\' && sortReversed === true}" aria-hidden="true"></span></th><th ng-click="sortOrder = \'liveData.EarningsPerShare\'; sortReversed = !sortReversed;">EPS <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData.EarningsPerShare\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData.EarningsPerShare\' && sortReversed === true}" aria-hidden="true"></span></th><th class="text-center" ng-click="sortOrder = \'liveData._52WeekLow\'; sortReversed = !sortReversed;">52 week-Range <span class="glyphicon-lighter small" ng-class="{\'glyphicon glyphicon-chevron-up\' : sortOrder === \'liveData._52WeekLow\' && sortReversed === false, \'glyphicon glyphicon-chevron-down\' : sortOrder === \'liveData._52WeekLow\' && sortReversed === true}" aria-hidden="true"></span></th><th class="text-center">Prev. Day</th><th class="text-center">See more</th></tr></thead><tbody><tr stock-list-item="" class="animate-repeat" ng-repeat="quote in stockQuotes | orderBy:sortOrder:sortReversed track by quote.yahooSymbol" quote="quote"></tr><tr ng-hide="stockQuotes.length > 0"><td colspan="13" class="text-center"><strong>Loading data...</strong></td></tr></tbody></table></div></div><div class="modal fade" id="addStockModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">Add Stock to Watchlist</h4></div><div class="modal-body"><form><div class="form-group"><label for="addStockName">Stock Name</label> <input type="text" class="form-control" id="addStockName" placeholder="Enter Stock Name" ng-model="addStockName"></div></form><div class="table-responsive"><table class="table table-striped" ng-show="addStockSuggestions.length > 0"><thead><tr><th class="col-md-1 text-center">Select</th><th class="col-md-2">Name</th><th class="col-md-6">Symbol</th><th class="col-md-3">Exchange</th><th class="col-md-1">Type</th></tr></thead><tbody><tr ng-repeat="stockSuggestion in addStockSuggestions"><td class="col-md-1 text-center"><input type="radio" name="addStockChosen" value="{{ stockSuggestion.name }}" ng-click="setSelectedStock(stockSuggestion)"></td><th class="col-md-2" scope="row">{{ stockSuggestion.symbol }}</th><td class="col-md-7">{{ stockSuggestion.name }}</td><td class="col-md-2">{{ stockSuggestion.exchDisp }}</td><td class="col-md-1">{{ stockSuggestion.typeDisp }}</td></tr></tbody></table></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" ng-click="closeAddStockModal()">Cancel</button> <button type="button" class="btn btn-primary" data-dismiss="modal" ng-class="{ disabled: !hasSelectedStock }" ng-click="saveSelectedStock()">Add Stock</button></div></div></div></div>'),e.put("views/stockListItem-partial.html",'<td class="text-right">{{ quote.index + 1 }}</td><td>{{ quote.liveData.Symbol }}</td><td>{{ quote.liveData.Name }}</td><td class="text-right">{{ quote.liveData.LastTradePriceOnly | currency }} {{ quote.liveData.Currency }}</td><td class="text-right" ng-class="{ \'text-success\': isGain(), \'text-danger\': isLoss() }">{{ quote.liveData.Change | currency }}</td><td class="text-right" ng-class="isGain() ? \'text-success\' : (isLoss() ? \'text-danger\' : \'\')">{{ quote.liveData.ChangeInPercent | percentage:2 }}</td><td class="text-right">{{ quote.liveData.DividendYield | percentage:2 }}</td><td class="text-right">{{ quote.liveData.PERatio }}</td><td class="text-right">{{ quote.liveData.EarningsPerShare | number:2 }}</td><td class="col-md-1" style="padding: 0;"><sparkline-bar class="sparkline-bar" min="{{ quote.liveData._52WeekLow }}" max="{{ quote.liveData._52WeekHigh }}" current="{{ quote.liveData.LastTradePriceOnly }}"></sparkline-bar></td><td class="col-md-1" style="padding: 0;"><sparkline class="sparkline" id="{{ \'sparkline\' + quote.yahooSymbol.replace(\'.\', \'\') }}" symbol="{{ quote.yahooSymbol }}" exchange="{{ quote.liveData.StockExchange }}" yesterday-close-price="{{ quote.liveData.PreviousClose }}"></sparkline></td><td class="text-center"><a href="#/quote/{{ quote.yahooSymbol }}" class="btn btn-default btn-xs" role="button" title="See details about {{ quote.symbol }}"><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Details</a></td>'),e.put("views/stockNews-partial.html",'<h3>News</h3><div class="row"><div class="table-responsive"><table class="table table-striped table-condensed"><thead></thead><tbody><tr class="animate-repeat" ng-repeat="newsItem in newsItems track by newsItem.guid.content"><td class="col-md-4"><p><a href="{{ newsItem.link }}" target="blank" title="{{ newsItem.title }}">{{ newsItem.title }}</a></p><p>{{ newsItem.pubDate }}</p></td><td class="col-md-8">{{ newsItem.description }}</td></tr></tbody></table></div></div>')
}]);